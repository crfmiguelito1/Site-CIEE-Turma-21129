<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Aprimore - Painel de Controle</title>

    <link rel="icon" type="image/png" href="../imagens/foguete4.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../imagens/foguete3.png"> 
    <link rel="apple-touch-icon" sizes="180x180" href="../imagens/foguete3.png"> 
    <link rel="shortcut icon" href="../imagens/foguete3.png">

    <link rel="stylesheet" href="/Site-CIEE-Turma-21129/styles.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        if (localStorage.getItem('theme') === 'dark') { document.documentElement.classList.add('dark'); } 
        else { document.documentElement.classList.remove('dark'); }
    </script>
    <style>
        :root{ --cor-roxa-principal:#6A1B9A; --cor-roxa-clara:#E1BEE7; --cor-laranja-destaque:#F57C00; --cor-branca:#FFFFFF; --cor-texto-principal:#333; --cor-fundo:#F8F9FA; --sombra-padrao:0 4px 12px rgba(0,0,0,0.08); }
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap');
        *{box-sizing:border-box}
        body{ font-family:'Montserrat',sans-serif; margin:0; background:var(--cor-fundo); color:var(--cor-texto-principal); display:flex; min-height:100vh; }
        .sidebar{ width:250px; background:var(--cor-roxa-principal); color:var(--cor-branca); padding:20px; height:100vh; position:sticky; top:0; display: flex; flex-direction: column; justify-content: space-between; border-right: 1px solid #5a1682; }
        .sidebar h1{font-size:1.6rem;text-align:center;margin:0 0 24px}
        .sidebar nav ul{list-style:none;padding:0;margin:0}
        .sidebar nav li a{ display:flex; align-items:center; gap:12px; color:var(--cor-branca); text-decoration:none; padding:12px 16px; border-radius:8px; margin-bottom:8px; font-weight:600; transition:background .2s; }
        .sidebar nav li a:hover, .sidebar nav li a.ativo{background:rgba(255,255,255,0.12)}
        .main-content{flex:1;padding:28px}
        .main-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:24px;}
        .user-profile{display:flex;align-items:center;gap:12px}
        .user-profile img{width:50px;height:50px;border-radius:50%;object-fit:cover;}
        .card{background:var(--cor-branca);padding:22px;border-radius:12px;box-shadow:var(--sombra-padrao)}
        .card h4{margin:0 0 16px;border-left:4px solid var(--cor-roxa-principal);padding-left:12px;font-size:1.1rem}
        #dashboard h2 { font-size: 2rem; font-weight: 700; color: #333; }
        #dashboard .welcome-text { font-size: 1.1rem; color: #555; margin-bottom: 2rem;}
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 2rem; }
        .stat-card { background: var(--cor-branca); padding: 20px; border-radius: 12px; box-shadow: var(--sombra-padrao); display: flex; align-items: center; gap: 15px; }
        .stat-card .icon { font-size: 2rem; color: var(--cor-roxa-principal); background-color: var(--cor-roxa-clara); width: 60px; height: 60px; border-radius: 50%; display: grid; place-items: center; }
        .stat-card .info strong { font-size: 1.8rem; display: block; } .stat-card .info span { font-size: 0.9rem; color: #666; }
        .curso-item{ display:flex;align-items:center;justify-content:space-between; background:#f9f9f9;margin:12px 0;padding:15px;border-radius:10px; border: 1px solid #eee; transition: box-shadow .2s, transform .2s; }
        .curso-item:hover { transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0,0,0,0.09); }
        .curso-item i{font-size:1.5em;color:var(--cor-roxa-principal);margin-right:15px;} .curso-item span{flex:1;font-size:0.95em;}
        .curso-item .btn-laranja{ background:var(--cor-laranja-destaque);border:none;padding:8px 15px; color:#fff;border-radius:8px;cursor:pointer;font-weight:600; }
        .curso-item .btn-laranja:hover{background:var(--cor-roxa-principal);}
        .dashboard-grid{display:grid;grid-template-columns:2fr 1fr;gap:22px}
        .grafico-container{display:flex;justify-content:center;align-items:center;height:200px}
        .inscritos-list{list-style:none;padding:0;margin:0}
        .inscrito-item{padding:10px;border-radius:8px;border:1px solid #eee;margin-bottom:8px;background:#fafafa}
        .about-us-container { padding: 1rem; }
        .about-us-mission { text-align: center; font-size: 1.1rem; line-height: 1.7; max-width: 800px; margin: 1rem auto 2.5rem auto; background: #f9f9f9; padding: 2rem; border-radius: 10px; border-left: 5px solid var(--cor-laranja-destaque);}
        .team-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 25px; }
        .team-member { text-align: center; padding: 20px; border-radius: 10px; background: var(--cor-branca); border: 1px solid #eee; transition: transform 0.2s, box-shadow 0.2s; }
        .team-member:hover { transform: translateY(-5px); box-shadow: var(--sombra-padrao); }
        .team-member img { width: 120px; height: 120px; border-radius: 50%; margin-bottom: 15px; border: 4px solid var(--cor-roxa-clara); }
        .team-member strong { display: block; font-size: 1.2rem; color: var(--cor-texto-principal); } .team-member span { font-size: 0.9rem; color: #666; }
        .hidden { display: none; }
        .btn-logout { background: #dc3545; color: var(--cor-branca); text-align: center; padding: 12px 16px; border-radius: 8px; margin-top: 20px; cursor: pointer; font-weight: 600; text-decoration: none; transition: background 0.2s; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-logout:hover { background: #c82333; }
        .dark body { --cor-fundo: #111827; --cor-texto-principal: #d1d5db; }
        .dark .card { background-color: #1f2937; border: 1px solid #374151; }
        .dark h2, .dark .welcome-text, .dark .stat-card .info span, .dark h4, .dark p { color: #f9fafb; }
        .dark .sidebar { background-color: #1f2937; border-right-color: #374151; }
        .dark .main-header { border-bottom-color: #374151; }
        .dark .stat-card, .dark .curso-item, .dark .inscrito-item { background: #374151; border-color: #4b5563; }
        .dark .about-us-mission, .dark .team-member { background: #1f2937; border-color: #374151; }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div>
            <h1 class="logo">
                Aprimore
                <img src="../imagens/foguete.svg" alt="Foguete Aprimore" class="icon-foguete">
            </h1>
            <nav>
                <ul>
                    <li><a href="#dashboard" class="menu-link ativo"><i class="fa-solid fa-house"></i> Dashboard</a></li>
                    <li><a href="#treinamentos" class="menu-link"><i class="fa-solid fa-chalkboard-user"></i> Treinamentos</a></li>
                    <li><a href="#progresso" class="menu-link"><i class="fa-solid fa-chart-line"></i> Progresso</a></li>
                    <li><a href="#quemsomos" class="menu-link"><i class="fa-solid fa-info-circle"></i> Quem Somos</a></li>
                    <li><a href="settings.html"><i class="fa-solid fa-gear"></i> Configurações</a></li>
                </ul>
            </nav>
        </div>
        <a href="javascript:void(0)" class="btn-logout" onclick="logout()">
            <i class="fa-solid fa-arrow-right-from-bracket"></i> Sair
        </a>
    </aside>

    <div class="main-content">
        <header class="main-header">
            <div></div>
            <div class="user-profile">
                <img src="https://i.pravatar.cc/150?img=3" alt="Usuário" />
                <span id="profile-username">Cadu</span>
            </div>
        </header>

        <section id="dashboard" class="content-section">
            <div>
                <h2>Bem-vindo de volta, <span id="dashboard-username">Cadu</span>!</h2>
                <p class="welcome-text">Este é o seu centro de aprendizado. Continue de onde parou e explore novos desafios.</p>
            </div>
            <div class="stats-grid">
                <div class="stat-card"><div class="icon"><i class="fa-solid fa-layer-group"></i></div><div class="info"><strong id="stat-cursos">0</strong><span>Cursos Inscritos</span></div></div>
                <div class="stat-card"><div class="icon"><i class="fa-solid fa-chart-pie"></i></div><div class="info"><strong id="stat-progresso">0%</strong><span>Progresso Médio</span></div></div>
                <div class="stat-card"><div class="icon"><i class="fa-solid fa-certificate"></i></div><div class="info"><strong>0</strong><span>Certificados Obtidos</span></div></div>
            </div>
            <div class="card hidden" id="continue-card">
                <h4>Continue de Onde Parou</h4>
                <div id="continue-list"></div>
            </div>
        </section>

        <section id="treinamentos" class="content-section card hidden">
            <h4>Cursos Disponíveis</h4>
            <div class="curso-item" data-course-name="Capacitação"><i class="fa-solid fa-graduation-cap"></i><span><strong>Capacitação</strong> – Nível: Iniciante – 10h</span><button class="btn-laranja" onclick="handleCourseAction('Capacitação', this)">Inscrever-se</button></div>
            <div class="curso-item" data-course-name="Padronização de Processos"><i class="fa-solid fa-gear"></i><span><strong>Padronização de Processos</strong> – Nível: Intermediário – 15h</span><button class="btn-laranja" onclick="handleCourseAction('Padronização de Processos', this)">Inscrever-se</button></div>
            <div class="curso-item" data-course-name="Adaptação à Tecnologia"><i class="fa-solid fa-computer"></i><span><strong>Adaptação à Tecnologia</strong> – Nível: Avançado – 20h</span><button class="btn-laranja" onclick="handleCourseAction('Adaptação à Tecnologia', this)">Inscrever-se</button></div>
            <div class="curso-item" data-course-name="Produtividade"><i class="fa-solid fa-bolt"></i><span><strong>Produtividade</strong> – Nível: Intermediário – 12h</span><button class="btn-laranja" onclick="handleCourseAction('Produtividade', this)">Inscrever-se</button></div>
            <div class="curso-item" data-course-name="Aprendizado Contínuo"><i class="fa-solid fa-book-open"></i><span><strong>Aprendizado Contínuo</strong> – Nível: Iniciante – 8h</span><button class="btn-laranja" onclick="handleCourseAction('Aprendizado Contínuo', this)">Inscrever-se</button></div>
            <div class="curso-item" data-course-name="Reduzir Rotatividade"><i class="fa-solid fa-users"></i><span><strong>Reduzir Rotatividade</strong> – Nível: Intermediário – 10h</span><button class="btn-laranja" onclick="handleCourseAction('Reduzir Rotatividade', this)">Inscrever-se</button></div>

        </section>

        <section id="progresso" class="content-section dashboard-grid hidden">
            <div class="card"><h4>Gráfico de Aprendizado Individual</h4><canvas id="lineChart" height="220"></canvas></div>
            <div class="card"><h4>Progresso Geral</h4><div class="grafico-container"><canvas id="progressChart" width="180" height="180"></canvas></div><p style="text-align:center;margin-top:8px">Você completou <strong id="percentText">0%</strong> dos cursos</p><div style="margin-top:12px"><h5 style="margin:0 0 8px 0">Meus Cursos</h5><ul id="meusCursos" class="inscritos-list"></ul></div></div>
        </section>

        <section id="quemsomos" class="content-section card hidden">
            <h4><i class="fa-solid fa-info-circle"></i> Sobre a Aprimore</h4>
            <div class="about-us-container">
                <p class="about-us-mission">Nascemos da paixão por tecnologia e educação. Acreditamos que o conhecimento é a ferramenta mais poderosa para transformar carreiras e impulsionar negócios. Nossa missão é oferecer treinamentos de alta qualidade, acessíveis e focados nas necessidades reais do mercado.</p>
                <h4 style="text-align:center; border:none; margin-bottom: 2rem;">Nossa Equipe</h4>
                <div class="team-grid">
                    <div class="team-member"><img src="https://i.pravatar.cc/150?img=11" alt="Foto de Ana Souza"><strong>Ana Souza</strong><span>CEO & Fundadora</span></div>
                    <div class="team-member"><img src="https://i.pravatar.cc/150?img=32" alt="Foto de Bruno Costa"><strong>Bruno Costa</strong><span>Diretor de Tecnologia</span></div>
                    <div class="team-member"><img src="https://i.pravatar.cc/150?img=31" alt="Foto de Carla Lima"><strong>Carla Lima</strong><span>Líder de Conteúdo</span></div>
                </div>
            </div>
        </section>
    </div>

    <img src="../imagens/foguete.svg" alt="Foguete decorativo" class="foguete-flutuante">

    <script>
        const infoCursos = { "Capacitação": { icone: "fa-solid fa-graduation-cap", url: "Capacitação.html" }, "Padronização de Processos": { icone: "fa-solid fa-gear", url: "Padronização de Processos.html" }, "Adaptação à Tecnologia": { icone: "fa-solid fa-computer", url: "Adaptação à Tecnologia.html" }, "Produtividade": { icone: "fa-solid fa-bolt", url: "Produtividade.html" }, "Aprendizado Contínuo": { icone: "fa-solid fa-book-open", url: "Aprendizado Contínuo.html" }, "Reduzir Rotatividade": { icone: "fa-solid fa-users", url: "Reduzir Rotatividade.html" }, };
        let inscritos = [];
        const totalDeCursos = 7;
        function carregarInscricoes() { const d = localStorage.getItem('cursosInscritos'); return d ? JSON.parse(d) : []; }
        function salvarInscricoes(lista) { localStorage.setItem('cursosInscritos', JSON.stringify(lista)); }
        function atualizarBotoesDosCursos() { document.querySelectorAll('.curso-item[data-course-name]').forEach(div => { const nome = div.dataset.courseName; if (inscritos.includes(nome)) { const btn = div.querySelector('button'); if(btn) btn.textContent = 'Acessar'; } }); }
        function atualizarContinueDeOndeParou() { const card = document.getElementById('continue-card'); const lista = document.getElementById('continue-list'); if (!card || !lista) return; if (inscritos.length === 0) { card.classList.add('hidden'); return; } card.classList.remove('hidden'); lista.innerHTML = ''; inscritos.forEach(nomeDoCurso => { const cursoInfo = infoCursos[nomeDoCurso]; if (cursoInfo) { lista.innerHTML += `<div class="curso-item"><i class="${cursoInfo.icone}"></i><span><strong>${nomeDoCurso}</strong></span><button class="btn-laranja" onclick="window.location.href='${cursoInfo.url}'">Continuar</button></div>`; } }); }
        function getCourseUrl(nome) { return infoCursos[nome] ? infoCursos[nome].url : 'painel.html'; }
        function handleCourseAction(nome, botao) { if (!inscritos.includes(nome)) { inscritos.push(nome); salvarInscricoes(inscritos); atualizarMeusCursos(); atualizaProgresso(); atualizarContinueDeOndeParou(); botao.textContent = 'Acessar'; Swal.fire({ icon: 'success', title: 'Inscrição confirmada!', text: `Inscrito em: ${nome}`, toast: true, position: 'top-end', showConfirmButton: false, timer: 3000 }); } else { window.location.href = getCourseUrl(nome); } }
        function atualizarMeusCursos(){ const ul = document.getElementById('meusCursos'); if(!ul) return; ul.innerHTML = ''; inscritos.forEach(c => { const li = document.createElement('li'); li.className = 'inscrito-item'; li.textContent = c; ul.appendChild(li); }); }
        const ctxP = document.getElementById('progressChart')?.getContext('2d');
        const progressChart = ctxP ? new Chart(ctxP, { type:'doughnut', data:{ datasets:[{data:[0,100],backgroundColor:['#F57C00','#E1BEE7'],borderWidth:0}] }, options:{cutout:'72%',plugins:{legend:{display:false}}} }) : null;
        const ctxL = document.getElementById('lineChart')?.getContext('2d');
        const lineChart = ctxL ? new Chart(ctxL, { type:'line', data:{ labels:['Início'], datasets:[{ label:'Evolução', data:[10], borderColor:'#6A1B9A', backgroundColor:'rgba(106,27,154,0.12)', tension:0.35,fill:true }] }, options:{ plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true,max:100}} } }) : null;
        function atualizaProgresso(){ const percent = Math.min(100, Math.round((inscritos.length / totalDeCursos) * 100)); document.getElementById('stat-cursos').textContent = inscritos.length; document.getElementById('stat-progresso').textContent = `${percent}%`; if (progressChart) { progressChart.data.datasets[0].data = [percent, 100 - percent]; progressChart.update(); const percentTextEl = document.getElementById('percentText'); if(percentTextEl) percentTextEl.textContent = `${percent}%`; } if (lineChart) { const novosLabels = ['Início']; const novosDados = [10]; inscritos.forEach((c,i)=>{ novosLabels.push(`Curso ${i+1}`); novosDados.push(10 + Math.min(90, (i+1)*15)); }); if (inscritos.length > 0) { novosLabels.push('Último'); novosDados.push(Math.min(100, novosDados[novosDados.length-1] + 5));} lineChart.data.labels = novosLabels; lineChart.data.datasets[0].data = novosDados; lineChart.update(); } }
        function logout() { Swal.fire({title:'Saindo...', text:'Deseja realmente sair?', icon:'question', showCancelButton:true, confirmButtonText:'Sim', cancelButtonText:'Não'}).then(r => { if(r.isConfirmed){ localStorage.clear(); window.location.href = "index.html"; } }); }
        document.addEventListener('DOMContentLoaded', () => {
            inscritos = carregarInscricoes();
            const username = localStorage.getItem('currentUser') || 'Cadu';
            document.getElementById('profile-username').textContent = username;
            const dashboardUsername = document.getElementById('dashboard-username');
            if (dashboardUsername) dashboardUsername.textContent = username;
            const params = new URLSearchParams(window.location.search);
            if (params.get('login') === 'success') { Swal.fire({ title: `Bem-vindo, ${username}!`, icon: 'success', timer: 2500, showConfirmButton: false, toast: true, position: 'top-end' }); window.history.replaceState({}, document.title, window.location.pathname); }
            const menuLinks = document.querySelectorAll('.menu-link');
            const contentSections = document.querySelectorAll('.content-section');
            const showSection = (hash) => { const targetId = hash ? hash.substring(1) : 'dashboard'; contentSections.forEach(s => s.classList.toggle('hidden', s.id !== targetId)); menuLinks.forEach(l => l.classList.toggle('ativo', l.getAttribute('href') === `#${targetId}`)); };
            menuLinks.forEach(link => { link.addEventListener('click', (e) => { e.preventDefault(); if (window.location.hash !== link.getAttribute('href')) { window.location.hash = link.getAttribute('href'); } }); });
            window.addEventListener('hashchange', () => showSection(window.location.hash));
            showSection(window.location.hash || '#dashboard');
            atualizarMeusCursos();
            atualizarBotoesDosCursos();
            atualizaProgresso();
            atualizarContinueDeOndeParou();
        });
    </script>
</body>
</html>